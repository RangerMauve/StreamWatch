%center
  %p.small
    Stolen from Tristan's
    %a{:href => "https://github.com/trishume/doubleVision"} Github
%p
  I recently was shown trick by a friend where an image was posted on a website
  that displayed one thing in the thumbnail and another in the lightbox.
  %a{:href => "http://funnyjunk.com/channel/ponytime/rainbow+dash/llhuDyy/15#15"} http://funnyjunk.com/channel/ponytime/rainbow+dash/llhuDyy/15#15
%p I set out to create a program that generates these images and this is what I came up with.
%p The output images look like this:
%p
  %a{:href => "https://a248.e.akamai.net/camo.github.com/1d78b42c5925e68609cb7e6cd77e6c617d689a0f/687474703a2f2f662e636c2e6c792f6974656d732f32753157314a306d327a334e30543042334b30792f6f75742e706e67", :target => "_blank"}
    %img{:alt => "Sample Image", :src => "https://a248.e.akamai.net/camo.github.com/1d78b42c5925e68609cb7e6cd77e6c617d689a0f/687474703a2f2f662e636c2e6c792f6974656d732f32753157314a306d327a334e30543042334b30792f6f75742e706e67", :style => "max-width:100%;"}/
%p Try downloading it to your computer and then viewing it. Cool eh?
%h2
  %a.anchor{:href => "#how-it-works", :name => "how-it-works"}>
  How it works
%p The PNG specification contains a metadata attribute that allows you to specify the gamma to render the image with. The thing is, not all renderers support this.
%p
  If an image is created with normal pixels spaced out around a grid of very light-colored pixels.
  The light colored pixels are actually the pixels of the second image reverse-mapped through a gamma function.
  However, they are so light they look white.
%p
  When the image is displayed with a very low gamma (I use 0.023).
  The normal pixels become almost black and the light pixels become the colors of the second image.
%p
  Example:
  %a{:href => "https://img.skitch.com/20120427-tjwy5f1gf2xhr9jkfkqi3wxxku.png", :target => "_blank"}
    %img{:alt => "Difference example", :src => "https://img.skitch.com/20120427-tjwy5f1gf2xhr9jkfkqi3wxxku.png", :style => "max-width:100%;"}/
%h2
  %a.anchor{:href => "#why", :name => "why"}>
  Why?
%p By taking of advantage of this, we can create png files that display a different picture if the renderer supports the gamma attribute.
%p Things that do not support the gamma attribute:
%ul
  %li Thumbnail renderers (Facebook, etc...)
  %li Apple png rendering
  %li Windows png rendering
%p
  Things that
  %strong do
  support the gamma attribute:
%ul
  %li Firefox (uses libpng wich supports the attribute)
  %li Google Chrome
%p
  This can lead to interesting combos.
  For example:
%ul
  %li linking the image on facebook can show one image as a thumbnail but a completely different one when the link is clicked.
  %li A picture that detects the user's browser. (Chrome/Firefox or Safari)
  %li A picture that displays one thing in the browser and a different thing when downloaded to the user's (victim's) computer.
%h2
  %a.anchor{:href => "#usage", :name => "usage"}>
  Usage
%p Next, run the program like this:
%pre
  %code
    :preserve
      doubleVision withgamma.png withoutgamma.png out.png
%p obviously replacing the filenames with your own.
%p
  It will combine the images into one image (out.png) that will display
  withgamma.png when viewed with gamma support (e.g. in Firefox)
  and withoutgamma.png when displayed without gamma support (e.g. As a thumbnail)
%h2
  %a.anchor{:href => "#other-example", :name => "other-example"}>
  Other Example
%p
  %a{:href => "https://a248.e.akamai.net/camo.github.com/ca1e122375addee76438e551095700a9b6b22003/687474703a2f2f662e636c2e6c792f6974656d732f31493239314531613174324f33533278326931322f4461794e696768742e706e67", :target => "_blank"}
    %img{:alt => "Day and Night", :src => "https://a248.e.akamai.net/camo.github.com/ca1e122375addee76438e551095700a9b6b22003/687474703a2f2f662e636c2e6c792f6974656d732f31493239314531613174324f33533278326931322f4461794e696768742e706e67", :style => "max-width:100%;"}/
%p
  Was generated from:
  %a{:href => "https://a248.e.akamai.net/camo.github.com/299f33c55a3ce8c9febd6c43b10e4daa0bf83069/687474703a2f2f662e636c2e6c792f6974656d732f3033316b31373063336b31693151306d304133582f4e696768742e706e67", :target => "_blank"}
    %img{:alt => "Night", :src => "https://a248.e.akamai.net/camo.github.com/299f33c55a3ce8c9febd6c43b10e4daa0bf83069/687474703a2f2f662e636c2e6c792f6974656d732f3033316b31373063336b31693151306d304133582f4e696768742e706e67", :style => "max-width:100%;"}/
  and
  %a{:href => "https://a248.e.akamai.net/camo.github.com/711aa06215652bb587e9ac7d4e1c493469fbbdc5/687474703a2f2f662e636c2e6c792f6974656d732f3033316b31373063336b31693151306d304133582f4461792e706e67", :target => "_blank"}
    %img{:alt => "Day", :src => "https://a248.e.akamai.net/camo.github.com/711aa06215652bb587e9ac7d4e1c493469fbbdc5/687474703a2f2f662e636c2e6c792f6974656d732f3033316b31373063336b31693151306d304133582f4461792e706e67", :style => "max-width:100%;"}/
%h2
  %a.anchor{:href => "#faq", :name => "faq"}>
  FAQ
%ul
  %li
    Why are the images so dark? -
    The images have to be darkened so that they do not show up in the other image.
    One image is also full of black pixels which make it look dark.
  %li
    Are you a wizard?
    Sadly, no. But programmers are almost the same thing.
%p
  %em Disclaimer: Frequently Asked Questions are not necessarily frequently asked, nor are they always questions.
